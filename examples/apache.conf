# Example Apache configuration for precompressed static files
# Used with Aurynx\HttpCompression
# Serve precompressed static assets in Apache
AddEncoding gzip .gz
AddEncoding br .br
AddEncoding zstd .zst

<IfModule mod_rewrite.c>
    RewriteEngine On
    # Try Brotli first, then gzip, then zstd
    RewriteCond %{HTTP:Accept-encoding} br
    RewriteCond %{REQUEST_FILENAME}\.br -f
    RewriteRule ^(.+)$ $1.br [QSA,L]

    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -f
    RewriteRule ^(.+)$ $1.gz [QSA,L]

    RewriteCond %{HTTP:Accept-encoding} zstd
    RewriteCond %{REQUEST_FILENAME}\.zst -f
    RewriteRule ^(.+)$ $1.zst [QSA,L]
</IfModule>

<IfModule mod_headers.c>
    <FilesMatch "\.(js|css|html|json|xml|svg|zst|gz|br)$">
        Header append Vary Accept-Encoding
    </FilesMatch>
</IfModule>
